{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "voices": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "soundbank_index": {
            "type": "integer",
            "enum": [
              0,
              1,
              2,
              3,
              4,
              5,
              6,
              7,
              8,
              9,
              255
            ],
            "description": "Index of the wavetable to use for this voice (0-9) / 255 = noise"
          },
          "glide": {
            "type": "boolean",
            "description": "Whether to enable pitch glide for this voice"
          },
          "glide_rate": {
            "type": "integer",
            "description": "Rate of pitch glide (higher values = faster glide)"
          },
          "detune": {
            "type": "integer",
            "description": "Detune amount in semitones for this voice"
          },
          "freq_detune": {
            "type": "integer",
            "description": "Frequency detune in Hz for this voice"
          }
        },
        "required": [
          "soundbank_index",
          "glide",
          "glide_rate",
          "detune",
          "freq_detune"
        ]
      },
      "minItems": 8,
      "maxItems": 8,
      "description": "Configuration for each of the 8 voices in the synthesizer"
    },
    "envelops": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "attack_time": {
            "type": "integer",
            "description": "Attack time of the envelope in samples"
          },
          "decay_time": {
            "type": "integer",
            "description": "Decay time of the envelope in samples"
          },
          "release_time": {
            "type": "integer",
            "description": "Release time of the envelope in samples"
          },
          "sustain_level": {
            "type": "integer",
            "description": "Sustain level of the envelope (0-100)"
          }
        },
        "required": [
          "attack_time",
          "decay_time",
          "release_time",
          "sustain_level"
        ]
      },
      "minItems": 8,
      "maxItems": 8,
      "description": "ADSR envelopes for each of the 8 voices"
    },
    "lfos": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "soundbank_index": {
            "type": "integer",
            "description": "Index of the wavetable to use for LFO waveform (0-9)"
          },
          "time": {
            "type": "integer",
            "description": "LFO timing parameter (frequency or rate)"
          }
        },
        "required": [
          "soundbank_index",
          "time"
        ]
      },
      "minItems": 4,
      "maxItems": 4,
      "description": "Low Frequency Oscillator configurations (4 LFOs total)"
    },
    "filter_config": {
      "type": "object",
      "properties": {
        "cutoff_frequency": {
          "type": "integer",
          "description": "Filter cutoff frequency (0-65535)"
        },
        "resonance": {
          "type": "integer",
          "description": "Filter resonance (0-65535)"
        },
        "kind_of_filter": {
          "type": "string",
          "description": "Type of filter ('low', 'high', 'band', 'notch')",
          "enum": [
            "Low",
            "High",
            "Band",
            "Notch"
          ]
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether the filter is enabled"
        }
      },
      "required": [
        "cutoff_frequency",
        "resonance",
        "kind_of_filter",
        "enabled"
      ],
      "description": "Global filter configuration for the synthesizer"
    },
    "mixer_config": {
      "type": "object",
      "properties": {
        "gain_voices": {
          "type": "array",
          "items": {
            "type": "integer",
            "description": "Gain level for each voice (0-100)"
          }
        },
        "gain_main": {
          "type": "integer",
          "description": "Main output gain level (0-100)"
        }
      },
      "required": [
        "gain_voices",
        "gain_main"
      ],
      "description": "Mixer configuration for voice and main outputs"
    },
    "overdrive_config": {
      "type": "object",
      "properties": {
        "threshold": {
          "type": "integer",
          "description": "Overdrive threshold level"
        },
        "kind": {
          "type": "string",
          "description": "Type of overdrive effect ('Soft', 'Hard', 'Softer')",
          "enum": [
            "Soft",
            "Hard",
            "Softer"
          ]
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether overdrive effect is enabled"
        }
      },
      "required": [
        "threshold",
        "kind",
        "enabled"
      ],
      "description": "Overdrive distortion effect configuration"
    },
    "bitcrunch_config": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Whether bitcrushing effect (8 bit style) is enabled"
        }
      },
      "required": [
        "enabled"
      ],
      "description": "Bitcrush effect configuration for reducing audio bit depth (8 bit chip tunes!)"
    },
    "routering_config": {
      "type": "object",
      "properties": {
        "voices_to_envelop": {
          "type": "array",
          "items": {
            "type": "integer",
            "description": "Voice routing to envelope mapping"
          }
        },
        "lfo_to_voice": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "voices": {
                "type": "array",
                "minItems": 2,
                "maxItems": 2,
                "items": {
                  "type": "integer",
                  "enum": [
                    0,
                    1,
                    2,
                    3,
                    4,
                    5,
                    6,
                    7,
                    8,
                    9,
                    255
                  ],
                  "description": "Voice indices to route LFO to (255 = all voices)"
                }
              },
              "enable": {
                "type": "boolean",
                "description": "Enable this LFO-to-voice routing"
              }
            },
            "required": [
              "voices",
              "enable"
            ]
          },
          "description": "LFO to voice routing configuration"
        },
        "lfo_to_filter": {
          "type": "boolean",
          "description": "When enabled, LFO #0 modulates the cutoff frequency of the filter"
        },
        "lfo_to_freq": {
          "type": "boolean",
          "description": "When enabled, LFO #0 modulates the frequency of all oscillators"
        },
        "lfo_to_freq_amount": {
          "type": "integer",
          "description": "The amount of frequency modulation applied to oscillators by LFO #0, measured in Hz"
        }
      },
      "required": [
        "voices_to_envelop",
        "lfo_to_voice",
        "lfo_to_filter",
        "lfo_to_freq",
        "lfo_to_freq_amount"
      ],
      "description": "Routing configuration for signal flow between components"
    },
    "synth_config": {
      "type": "object",
      "properties": {
        "mode": {
          "type": "string",
          "enum": [
            "Mono",
            "BiPoly",
            "QuadPoly",
            "OctoPoly"
          ],
          "description": "Polyphony mode of the synthesizer (Mono, BiPoly, QuadPoly, OctoPoly)"
        }
      },
      "required": [
        "mode"
      ],
      "description": "General synthesizer configuration settings"
    }
  },
  "required": [
    "voices",
    "envelops",
    "lfos",
    "filter_config",
    "mixer_config",
    "overdrive_config",
    "bitcrunch_config",
    "routering_config",
    "synth_config"
  ]
}